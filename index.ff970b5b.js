!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r);var c,i=r("bpxeT"),s=r("8nrFW"),o=r("2TvXO"),u=r("dIxxU"),l=r("4s6iC"),d=r("4LMMA"),f="week",p="trending",h="genre/movie/list";(function(){return w.apply(this,arguments)})().then((function(e){c=Array.from(e.genres)}));var v=document.querySelector(".js-gallery"),g=document.querySelector(".header__warning");function _(e){return m.apply(this,arguments)}function m(){return(m=e(i)(e(o).mark((function t(n){var a,r;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new URLSearchParams({api_key:l.KEY,page:n,include_adult:!1}),e.next=4,u.default.get("".concat(l.API).concat(p,"/").concat(l.MEDIA_TYPE,"/").concat(f,"?").concat(a));case 4:if(200===(r=e.sent).status){e.next=7;break}throw new Error(r.status);case 7:return e.abrupt("return",r.data);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function b(t){var n="";t.forEach((function(e){var t,a,r=e.id,i=e.poster_path,s=e.genre_ids,o=e.title,u=e.release_date,l=(a="",(t=s)?(t.forEach((function(e){var t=!0,n=!1,r=void 0;try{for(var i,s=c[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value;o.id===e&&(a+=o.name+", ")}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}})),a?a.substring(0,a.length-2):""):""),d=u?u.substring(0,4):"";l&&d&&(l+=" | "),o||(o="no information"),n+='\n      <li class="film-card">\n         \t<a href="#" class="film-card__link">\n            <img\n              class="film-card__film-img"\n              src="'.concat(i?"https://image.tmdb.org/t/p/w500"+i:"https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg",'"\n              alt="').concat(o,'"\n              id="').concat(r,'"\n            />\n            <h3 class="film-card__film-name">').concat(o,'</h3>\n            <p class="film-card__genre">').concat(l).concat(d,"</p>\n          </a>\n        </li>\n\t\t\t\t\t\t\t")})),v.innerHTML=n,d.save("film-current-page",e(s)(t))}function w(){return(w=e(i)(e(o).mark((function t(){var n,a;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URLSearchParams({api_key:l.KEY}),e.next=4,u.default.get("".concat(l.API).concat(h,"?").concat(n));case 4:if(200===(a=e.sent).status){e.next=7;break}throw new Error(a.status);case 7:return e.abrupt("return",a.data);case 10:e.prev=10,e.t0=e.catch(0),console.log("Підставити картинку, сервер терміново недоступний");case 13:case"end":return e.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function E(){document.querySelector(".spinner").classList.toggle("is-hidden")}window.addEventListener("load",(function(){v.innerHTML="",_(1).then((function(e){var t=e.page,n=e.results,a=e.total_pages;b(n),W(t,a,C)})).catch((function(){g.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((function(){g.innerHTML=""}),4e3)}))}));i=r("bpxeT");var y=r("8MBJY"),L=r("a2hTj"),x=(o=r("2TvXO"),u=r("dIxxU"),l=r("4s6iC"),{form:document.querySelector(".header__form"),input:document.querySelector(".header__input"),formButton:document.querySelector(".btn"),gallery:document.querySelector(".js-gallery"),warning:document.querySelector(".header__warning")}),T=new(function(){"use strict";function t(){e(y)(this,t),this.searchQuery="",this.page=1}return e(L)(t,[{key:"searchMovieFetch",value:function(t){var n=this;return e(i)(e(o).mark((function a(){var r,c;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams({api_key:l.KEY,language:"en-US",query:"".concat(n.searchQuery),page:t,include_adult:!1}),e.prev=1,e.next=4,u.default.get("".concat("https://api.themoviedb.org/3","/search/movie?").concat(r));case 4:if(200===(c=e.sent).status){e.next=7;break}throw new Error(c.status);case 7:return e.abrupt("return",c.data);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.message);case 13:case"end":return e.stop()}}),a,null,[[1,10]])})))()}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"resetPage",value:function(){this.page=1}}]),t}());function M(e){var t=x.input.value;x.inputBtnClear.style.display=t?"block":"none"}function S(){x.warning.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Search result not successful. Enter the correct movie name.</div>'),setTimeout((function(){x.warning.innerHTML=""}),4e3),galleryRef.innerHTML="",_(1).then((function(e){var t=e.page,n=e.results,a=e.total_pages;b(n),W(t,a,C)}))}x.input.addEventListener("input",M),x.input.addEventListener("input",M),x.form.addEventListener("submit",(function(e){if(E(),e.preventDefault(),T.query=e.currentTarget.elements.searchQuery.value.trim().toLowerCase(),!T.query)return void S();T.resetPage(),T.searchMovieFetch(1).then((function(e){if(e){var t=e.page,n=e.total_pages,a=e.results;if(!n)return E(),void S();x.gallery.innerHTML="",b(a),W(t,n,D),E()}}))})),E(),window.addEventListener("load",E);var q=document.querySelector(".js-pagination"),k=1,Q=q,O=1,C=1,D=2;function W(e,t,n){var a=e-1,r=e-2,c=e+1,i=e+2,s="";Q=n?q:pagLibRef,k=n,!e||e>t||(e>1&&(s+='<li class="js-pagination__arrow-left">'.concat("&#8592;","</li>")),e>1&&(s+='<li class="js-pagination__button js-pagination__button-end">1</li>'),e>4&&(s+='<li class="js-pagination__points">...</li>'),e>3&&(s+='<li class="js-pagination__button">'.concat(r,"</li>")),e>2&&(s+='<li class="js-pagination__button">'.concat(a,"</li>")),s+='<li class="js-pagination__button js-pagination__button-current">'.concat(e,"</li>"),e+1<t&&(s+='<li class="js-pagination__button">'.concat(c,"</li>")),e+2<t&&(s+='<li class="js-pagination__button">'.concat(i,"</li>")),e+4<t&&(s+='<li class="js-pagination__points">...</li>'),e<t&&(s+='<li class="js-pagination__button js-pagination__button-end">'.concat(t,"</li>")),e<t&&(s+='<li class="js-pagination__arrow-right">'.concat("&#8594;","</li>")),Q.innerHTML=s)}Q.addEventListener("click",(function(e){var t=e.target;"..."!==t.textContent&&(t.classList.contains("js-pagination__arrow-left")&&(O-=1),t.classList.contains("js-pagination__arrow-right")&&(O+=1),t.classList.contains("js-pagination__button")&&(O=Number(t.textContent)),k&&(1===k?(E(),_(O).then((function(e){var t=e.page,n=e.results,a=e.total_pages;b(n),W(t,a,k),E()}))):T.searchMovieFetch(O).then((function(e){var t=e.page,n=e.results,a=e.total_pages;b(n),W(t,a,k)}))))}));d=r("4LMMA");var j=r("73ES2"),A=r("cDXQO"),U=r("iDjs5"),R={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},H=new(0,j.default);function I(){var e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,A.handleBackButtonClick)(e,t),H.close(),R.closeBtn.removeEventListener("click",I),A.trailerButtonRef.removeEventListener("click",A.handleTrailerButtonClick),window.removeEventListener("keydown",B)}function B(e){"Escape"===e.code&&(H.close(),R.closeBtn.removeEventListener("click",I),window.removeEventListener("keydown",B))}R.gallery.addEventListener("click",(function(e){if(e.preventDefault(),A.trailerButtonRef.addEventListener("click",A.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;var t=(n=e.target.id,d.load("film-current-page").find((function(e){return e.id===Number(n)})));var n;H.modifyDataFilm(t),H.open(),R.btnWatched.addEventListener("click",(function(){R.btnWatched.classList.contains("watched_send")?(R.btnWatched.textContent="REMOVE FROM WATCHED",R.btnWatched.classList.replace("watched_send","watched_remove"),(0,U.sendWatchedToStorage)()):R.btnWatched.classList.contains("watched_remove")&&(R.btnWatched.textContent="ADD TO WATCHED",R.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{var t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),a=n.findIndex((function(t){return t.id===e.id}));n.splice(a,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));R.btnWatched.textContent="ADD TO WATCHED",R.btnWatched.classList.replace("watched_remove","watched_send")})),R.btnQueue.addEventListener("click",(function(){R.btnQueue.classList.contains("queue_send")?(R.btnQueue.textContent="REMOVE FROM QUEUE",R.btnQueue.classList.replace("queue_send","queue_remove"),(0,U.sendQueueToStorage)()):R.btnQueue.classList.contains("queue_remove")&&(R.btnQueue.textContent="ADD TO QUEUE",R.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{var t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),a=n.findIndex((function(t){return t.id===e.id}));n.splice(a,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));R.btnQueue.textContent="ADD TO QUEUE",R.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{var t=localStorage.getItem("WatchedMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?(R.btnWatched.classList.replace("watched_send","watched_remove"),R.btnWatched.textContent="REMOVE FROM WATCHED"):(R.btnWatched.classList.replace("watched_remove","watched_send"),R.btnWatched.textContent="ADD TO WATCHED")}catch(e){R.btnWatched.classList.replace("watched_remove","watched_send")}}(t),R.btnWatched.classList.contains("watched_remove")?R.btnWatched.textContent="REMOVE FROM WATCHED":R.btnWatched.classList.contains("watched_send")&&(R.btnWatched.textContent="ADD TO WATCHED");(function(e){try{var t=localStorage.getItem("QueueMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?(R.btnQueue.classList.replace("queue_send","queue_remove"),R.btnQueue.textContent="REMOVE FROM QUEUE"):(R.btnQueue.classList.replace("queue_remove","queue_send"),R.btnQueue.textContent="ADD TO QUEUE")}catch(e){R.btnQueue.classList.replace("queue_remove","queue_send")}})(t),R.btnQueue.classList.contains("queue_remove")?R.btnQueue.textContent="REMOVE FROM QUEUE":R.btnWatched.classList.contains("queue_send")&&(R.btnQueue.textContent="ADD TO QUEUE");R.closeBtn.addEventListener("click",I),window.addEventListener("keydown",B)})),R.closeBtn.addEventListener("click",I),window.addEventListener("keydown",B),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&I()})),r("cDXQO"),r("aZhHc"),r("d7VxN")}();
//# sourceMappingURL=index.ff970b5b.js.map
