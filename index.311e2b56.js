var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var s={id:e,exports:{}};return t[e]=s,a.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var s=a("2shzp"),i=a("8G1wF"),r=a("b5rV1");let o;(async function(){try{const e=new URLSearchParams({api_key:i.KEY}),t=await s.default.get(`${i.API}genre/movie/list?${e}`);if(200!==t.status)throw new Error(t.status);return t.data}catch(e){console.log("Підставити картинку, сервер терміново недоступний")}})().then((e=>{o=Array.from(e.genres)}));const c=document.querySelector(".js-gallery"),l=document.querySelector(".header__warning");async function u(e){try{const t=new URLSearchParams({api_key:i.KEY,page:e,include_adult:!1}),n=await s.default.get(`${i.API}trending/${i.MEDIA_TYPE}/week?${t}`);if(200!==n.status)throw new Error(n.status);return n.data}catch(e){}}function d(e){let t="";e.forEach((({id:e,poster_path:n,genre_ids:a,title:s,release_date:i})=>{let r=function(e){let t="";return e?(e.forEach((e=>{for(const n of o)n.id===e&&(t+=n.name+", ")})),t?t.substring(0,t.length-2):""):""}(a),c=i?i.substring(0,4):"";r&&c&&(r+=" | "),s||(s="no information"),t+=`\n      <li class="film-card">\n         \t<a href="#" class="film-card__link">\n            <img\n              class="film-card__film-img"\n              src="${n?"https://image.tmdb.org/t/p/w500"+n:"https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg"}"\n              alt="${s}"\n              id="${e}"\n            />\n            <h3 class="film-card__film-name">${s}</h3>\n            <p class="film-card__genre">${r}${c}</p>\n          </a>\n        </li>\n\t\t\t\t\t\t\t`})),c.innerHTML=t,r.save("film-current-page",[...e])}function g(){document.querySelector(".spinner").classList.toggle("is-hidden")}window.addEventListener("load",(()=>{c.innerHTML="",u(1).then((({page:e,results:t,total_pages:n})=>{d(t),L(e,n,E)})).catch((()=>{l.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{l.innerHTML=""}),4e3)}))}));s=a("2shzp"),i=a("8G1wF");const h={form:document.querySelector(".header__form"),input:document.querySelector(".header__input"),formButton:document.querySelector(".btn"),gallery:document.querySelector(".js-gallery"),warning:document.querySelector(".header__warning")};const _=new class{async searchMovieFetch(e){const t=new URLSearchParams({api_key:i.KEY,language:"en-US",query:`${this.searchQuery}`,page:e,include_adult:!1});try{const e=await s.default.get(`https://api.themoviedb.org/3/search/movie?${t}`);if(200!==e.status)throw new Error(e.status);return e.data}catch(e){console.log(e.message)}}get query(){return this.searchQuery}set query(e){this.searchQuery=e}resetPage(){this.page=1}constructor(){this.searchQuery="",this.page=1}};function p(e){const t=h.input.value;h.inputBtnClear.style.display=t?"block":"none"}function m(){h.warning.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Search result not successful. Enter the correct movie name.</div>'),setTimeout((()=>{h.warning.innerHTML=""}),4e3),galleryRef.innerHTML="",u(1).then((({page:e,results:t,total_pages:n})=>{d(t),L(e,n,E)}))}h.input.addEventListener("input",p),h.input.addEventListener("input",p),h.form.addEventListener("submit",(function(e){if(g(),e.preventDefault(),_.query=e.currentTarget.elements.searchQuery.value.trim().toLowerCase(),!_.query)return void m();_.resetPage(),_.searchMovieFetch(1).then((e=>{if(!e)return;const{page:t,total_pages:n,results:a}=e;if(!n)return g(),void m();h.gallery.innerHTML="",d(a),L(t,n,y),g()}))})),g(),window.addEventListener("load",g);const f=document.querySelector(".js-pagination");let v=1,b=f,w=1;const E=1,y=2;function L(e,t,n){let a="";b=n?f:pagLibRef,v=n,!e||e>t||(e>1&&(a+='<li class="js-pagination__arrow-left">&#8592;</li>'),e>1&&(a+='<li class="js-pagination__button js-pagination__button-end">1</li>'),e>4&&(a+='<li class="js-pagination__points">...</li>'),e>3&&(a+=`<li class="js-pagination__button">${e-2}</li>`),e>2&&(a+=`<li class="js-pagination__button">${e-1}</li>`),a+=`<li class="js-pagination__button js-pagination__button-current">${e}</li>`,e+1<t&&(a+=`<li class="js-pagination__button">${e+1}</li>`),e+2<t&&(a+=`<li class="js-pagination__button">${e+2}</li>`),e+4<t&&(a+='<li class="js-pagination__points">...</li>'),e<t&&(a+=`<li class="js-pagination__button js-pagination__button-end">${t}</li>`),e<t&&(a+='<li class="js-pagination__arrow-right">&#8594;</li>'),b.innerHTML=a)}b.addEventListener("click",(({target:e})=>{"..."!==e.textContent&&(e.classList.contains("js-pagination__arrow-left")&&(w-=1),e.classList.contains("js-pagination__arrow-right")&&(w+=1),e.classList.contains("js-pagination__button")&&(w=Number(e.textContent)),v&&(1===v?(g(),u(w).then((({page:e,results:t,total_pages:n})=>{d(t),L(e,n,v),g()}))):_.searchMovieFetch(w).then((({page:e,results:t,total_pages:n})=>{d(t),L(e,n,v)}))))}));r=a("b5rV1");var q=a("fQE3M"),S=a("37v9V"),Q=a("9dykO");const T={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},M=new(0,q.default);function O(){const e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,S.handleBackButtonClick)(e,t),M.close(),T.closeBtn.removeEventListener("click",O),S.trailerButtonRef.removeEventListener("click",S.handleTrailerButtonClick),window.removeEventListener("keydown",W)}function W(e){"Escape"===e.code&&(M.close(),T.closeBtn.removeEventListener("click",O),window.removeEventListener("keydown",W))}T.gallery.addEventListener("click",(function(e){if(e.preventDefault(),S.trailerButtonRef.addEventListener("click",S.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;const t=(n=e.target.id,r.load("film-current-page").find((e=>e.id===Number(n))));var n;M.modifyDataFilm(t),M.open(),T.btnWatched.addEventListener("click",(function(){T.btnWatched.classList.contains("watched_send")?(T.btnWatched.textContent="REMOVE FROM WATCHED",T.btnWatched.classList.replace("watched_send","watched_remove"),(0,Q.sendWatchedToStorage)()):T.btnWatched.classList.contains("watched_remove")&&(T.btnWatched.textContent="ADD TO WATCHED",T.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),a=n.findIndex((t=>t.id===e.id));n.splice(a,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));T.btnWatched.textContent="ADD TO WATCHED",T.btnWatched.classList.replace("watched_remove","watched_send")})),T.btnQueue.addEventListener("click",(function(){T.btnQueue.classList.contains("queue_send")?(T.btnQueue.textContent="REMOVE FROM QUEUE",T.btnQueue.classList.replace("queue_send","queue_remove"),(0,Q.sendQueueToStorage)()):T.btnQueue.classList.contains("queue_remove")&&(T.btnQueue.textContent="ADD TO QUEUE",T.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),a=n.findIndex((t=>t.id===e.id));n.splice(a,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));T.btnQueue.textContent="ADD TO QUEUE",T.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(T.btnWatched.classList.replace("watched_send","watched_remove"),T.btnWatched.textContent="REMOVE FROM WATCHED"):(T.btnWatched.classList.replace("watched_remove","watched_send"),T.btnWatched.textContent="ADD TO WATCHED")}catch(e){T.btnWatched.classList.replace("watched_remove","watched_send")}}(t),T.btnWatched.classList.contains("watched_remove")?T.btnWatched.textContent="REMOVE FROM WATCHED":T.btnWatched.classList.contains("watched_send")&&(T.btnWatched.textContent="ADD TO WATCHED");(function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(T.btnQueue.classList.replace("queue_send","queue_remove"),T.btnQueue.textContent="REMOVE FROM QUEUE"):(T.btnQueue.classList.replace("queue_remove","queue_send"),T.btnQueue.textContent="ADD TO QUEUE")}catch(e){T.btnQueue.classList.replace("queue_remove","queue_send")}})(t),T.btnQueue.classList.contains("queue_remove")?T.btnQueue.textContent="REMOVE FROM QUEUE":T.btnWatched.classList.contains("queue_send")&&(T.btnQueue.textContent="ADD TO QUEUE");T.closeBtn.addEventListener("click",O),window.addEventListener("keydown",W)})),T.closeBtn.addEventListener("click",O),window.addEventListener("keydown",W),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&O()})),a("37v9V"),a("7bYU0"),a("jLhJV");
//# sourceMappingURL=index.311e2b56.js.map
